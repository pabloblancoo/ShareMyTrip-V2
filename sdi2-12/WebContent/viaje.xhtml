<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/templates/template.xhtml">

	<ui:define name="content">
		<div class="ui-grid ui-grid-responsive">
			<div class="ui-grid.row">
				<div class="ui-grid-col-12" style="text-align:center;">
				<h1>
					<h:outputText value="#{viajes.viaje.departure.city}" />
					<h:outputText value=" -> " />
					<h:outputText value="#{viajes.viaje.destination.city}" />
					</h1>
				</div>
			</div>
			<div class="ui-grid-row">
				<div class="ui-grid-col-4"></div>
				<div class="ui-grid-col-4" style="text-align:center;">

					<p:panelGrid columns="2">
						<f:facet name="header">
				#{msgs.tripGeneralData}
			</f:facet>

						<h:outputText value="#{msgs.listTripAvailablePax}" />
						<h:outputText value="#{viajes.viaje.availablePax}" />

						<h:outputText value="#{msgs.tripCost}" />
						<h:outputText value="#{viajes.viaje.estimatedCost}" />

					</p:panelGrid>

					<p:panelGrid columns="2">
						<f:facet name="header">
				#{msgs.tripDepartureData}
			</f:facet>

						<h:outputText value="#{msgs.tripAddress}" />
						<h:outputText value="#{viajes.viaje.departure.address}" />

						<h:outputText value="#{msgs.tripCity}" />
						<h:outputText value="#{viajes.viaje.departure.city}" />

						<h:outputText value="#{msgs.tripState}" />
						<h:outputText value="#{viajes.viaje.departure.state}" />

						<h:outputText value="#{msgs.tripZip}" />
						<h:outputText value="#{viajes.viaje.departure.zipCode}" />

						<h:outputText value="#{msgs.tripDepartureDate}" />
						<h:outputText value="#{viajes.viaje.departureDate}">
							<f:convertDateTime locale="#{settings.locale}" type="date"
								dateStyle="full" />
						</h:outputText>

					</p:panelGrid>

					<p:panelGrid columns="2">
						<f:facet name="header">
				#{msgs.tripArrivalData}
			</f:facet>

						<h:outputText value="#{msgs.tripAddress}" />
						<h:outputText value="#{viajes.viaje.destination.address}" />

						<h:outputText value="#{msgs.tripCity}" />
						<h:outputText value="#{viajes.viaje.destination.city}" />

						<h:outputText value="#{msgs.tripState}" />
						<h:outputText value="#{viajes.viaje.destination.state}" />

						<h:outputText value="#{msgs.tripZip}" />
						<h:outputText value="#{viajes.viaje.destination.zipCode}" />

						<h:outputText value="#{msgs.tripArrivalDate}" />
						<h:outputText value="#{viajes.viaje.arrivalDate}">
							<f:convertDateTime locale="#{settings.locale}" type="date"
								dateStyle="full" />
						</h:outputText>

					</p:panelGrid>

					<p:panelGrid columns="2" rendered="#{settings.usuario != null}">
						<f:facet name="header">
							<h:outputText value="#{msgs.tripTravelers}" />
						</f:facet>

						<h:outputText value="#{msgs.tripPromoter}" />
						<h:outputText value="#{viajes.promotor.name}" />

						<ui:repeat var="viajero" value="#{viajes.viajeros}"
							rendered="#{viajes.viajeros.size() > 0}">
							
							<h:outputText value="#{msgs.tripTraveler}" />
						</ui:repeat>
						<ui:repeat var="viajero" value="#{viajes.viajeros}"
							rendered="#{viajes.viajeros.size() > 0}">
							
							<h:outputText value="#{viajero.user.name}" />
						</ui:repeat>

					</p:panelGrid>
					<p:panelGrid columns="1" rendered="#{settings.usuario == null}">
						#{msgs.tripMoreInfo}
					</p:panelGrid>
					<p:panelGrid columns="1" rendered="#{viajes.mostrarSolicitarPlaza()}">
						<p:commandButton value="#{msgs.tripApply}" 
							action="solicitarPlaza"
							type="submit"
							actionListener="#{viajes.solicitarPlaza}"
							inmediate="true"/>
					</p:panelGrid>
					<p:dataTable rendered="#{viajes.isPromotorViaje()}" var="pendiente" value="#{viajes.pendientes}">
						<p:column headerText="Nombre">
							<h:outputText value="#{pendiente.user.name}" />
						</p:column>
						<p:column headerText="Estado">
							<h:outputText value="#{pendiente.status}" />
						</p:column>
						<p:column headerText="Opciones">
							<p:commandLink
								rendered="#{!pendiente.excluded}"
								value="Excluir"
								actionListener="#{viajes.exclude(pendiente)}"
								update="form-content"
								/>
							<br/>
							<p:commandLink 
								rendered="#{!pendiente.accepted}"
								value="Admitir"
								actionListener="#{viajes.accept(pendiente)}"
								update="form-content"
								/>
						</p:column>
					</p:dataTable>
				</div>
			</div>
		</div>
	</ui:define>

</ui:composition>

